(function(e,t){var i=e.document;var a=i.documentElement;var r=i.querySelector('meta[name="viewport"]');var n=i.querySelector('meta[name="flexible"]');var o=0;var l=0;var s;var m=t.flexible||(t.flexible={});if(r){console.warn("将根据已有的meta标签来设置缩放比例");var d=r.getAttribute("content").match(/initial\-scale=([\d\.]+)/);if(d){l=parseFloat(d[1]);o=parseInt(1/l)}}else if(n){var f=n.getAttribute("content");if(f){var p=f.match(/initial\-dpr=([\d\.]+)/);var c=f.match(/maximum\-dpr=([\d\.]+)/);if(p){o=parseFloat(p[1]);l=parseFloat((1/o).toFixed(2))}if(c){o=parseFloat(c[1]);l=parseFloat((1/o).toFixed(2))}}}if(!o&&!l){var v=e.navigator.appVersion.match(/android/gi);var u=e.navigator.appVersion.match(/iphone/gi);var h=e.devicePixelRatio;if(u){if(h>=3&&(!o||o>=3)){o=3}else if(h>=2&&(!o||o>=2)){o=2}else{o=1}}else{o=1}l=1/o}a.setAttribute("data-dpr",o);if(!r){r=i.createElement("meta");r.setAttribute("name","viewport");r.setAttribute("content","initial-scale="+l+", maximum-scale="+l+", minimum-scale="+l+", user-scalable=no, viewport-fit=cover");if(a.firstElementChild){a.firstElementChild.appendChild(r)}else{var x=i.createElement("div");x.appendChild(r);i.write(x.innerHTML)}}function b(){var t=a.getBoundingClientRect().width;var i=t/7.5;a.style.fontSize=i+"px";m.rem=e.rem=i}e.addEventListener("resize",function(){clearTimeout(s);s=setTimeout(b,300)},false);e.addEventListener("pageshow",function(e){if(e.persisted){clearTimeout(s);s=setTimeout(b,300)}},false);if(i.readyState==="complete"){i.body.style.fontSize=12*o+"px"}else{i.addEventListener("DOMContentLoaded",function(e){i.body.style.fontSize=12*o+"px"},false)}b();m.dpr=e.dpr=o;m.refreshRem=b;m.rem2px=function(e){var t=parseFloat(e)*this.rem;if(typeof e==="string"&&e.match(/rem$/)){t+="px"}return t};m.px2rem=function(e){var t=parseFloat(e)/this.rem;if(typeof e==="string"&&e.match(/px$/)){t+="rem"}return t}})(window,window["lib"]||(window["lib"]={}));
